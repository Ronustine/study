# 压测相关

## 参数调整
- Nginx并发数
- Tomcat并发数与请求超时时间
- Redis连接池
- Dubbo连接池与超时时间
- 数据库连接池-- Too manny connections
- Linux系统的句柄数-- Too many open files

## 以下无关
性能压测平台
前言

之前测试及开发人员进行压力测试时，往往需要自己申请机器并进行压测机的部署，过程比较费力、耗时很长，而且对个人技术能力的要求比较高，通常要求压测人员需要熟悉linux命令、网络环境以及各种中间件。为了解决压测过程中的痛点，所以我们基于jmeter开发了我们自己的性能压测系统，该系统主要有如下特点：

    基于JMeter并作了定制化开发
    容器化，采用docker + k8s进行负载机管理
    实时监控
    浏览器端创建及编辑压测脚本
    网络环境打通
    定时执行压测任务
    ...

如何从0到1构建自己的压测系统
技术选型，为何会选择JMeter

在进行开发之前，我们访问了公司内部的一些测试人员，发现我们大部分的测试人员以往都有使用JMeter的经历，考虑到任何一款应用需要有用户的使用才能有价值，所以我们采用JMeter来作为我们的压测引擎。但在后续的开发中，我们会对开源的一些压测引擎进行调研，比如Grinder、Gatling、Locust等，会提供其他的压测引擎，减少压测的学习成本，更加方便项目的接入
架构

project structure

    frontend，前端项目采用nginx作静态文件服务器，以React + ant Design搭建
    gateway，网关项目，基于spring boot + Spring netflix zuul搭建，主要用来处理sso接入及用户权限校验
    testcase-mgmr，测试用例管理项目，基于spring boot + jmeter搭建，主要用来实现脚本的添加、编辑、脚本调试调试、脚本列表等功能
    task-mgmr，任务管理项目，基于spring boot搭建，主要用来实现任务列表及相关操作等功能
    container-mgmr, 容器管理项目，使用python编写，主要用来实现负载机的编排及部署、定时任务的执行、测试报告的生成等功能
    其他
        influxdb，时序数据库、用来保存压测数据
        grafana，用来实时展示压测数据
        gitbook，用作搭建帮助文档
        mongodb、oss等

功能介绍

    脚本管理
    脚本编辑及添加
    任务列表

实施中遇到的问题及解决方案

    请移步解决方案

如何执行一个压测任务

    请移步脚本管理

接下来的计划

    线上流量回放 将线上的流量能够直接打到测试环境上，其好处是能够完全还原线上环境的请求，而且不会对生产环境造成数据污染
    多压测引擎的提供 目前我们仅仅提供JMeter的压测方式，需要用户能够熟练使用JMeter编辑压测脚本，但学习成本较高，接下来我们将提供其他的压测引擎比如基于grinder、gatling等，减少压测的学习成本，使压测系统更易接入和方便使用
